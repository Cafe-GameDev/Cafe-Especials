# Sugestões para a Versão 2.0 do CafeAudioManager

Este documento descreve sugestões de aprimoramentos e novos recursos para uma futura versão (v2.0) do plugin `CafeAudioManager`.

## 1. Sugestões de Recursos (Features)

### 1.1. Suporte a Áudio Posicional (2D/3D)

Atualmente, o `CafeAudioManager` é projetado exclusivamente para áudio mono, sem suporte para efeitos de áudio posicional. A adição de suporte para `AudioStreamPlayer2D` e/ou `AudioStreamPlayer3D` permitiria que os desenvolvedores utilizassem o plugin para SFX que exigem posicionamento espacial no jogo.

*   **Implementação:**
    *   Criação de novos sinais, como `play_sfx_at_position_requested(sfx_key: String, position: Vector2, bus: String)` para 2D e `play_sfx_at_3d_position_requested(sfx_key: String, position: Vector3, bus: String)` para 3D.
    *   Gerenciamento de um pool de `AudioStreamPlayer2D`/`AudioStreamPlayer3D` de forma semelhante ao pool de SFX atual, mas com a capacidade de anexá-los temporariamente a nós no mundo do jogo ou gerenciá-los diretamente pelo `CafeAudioManager`.
    *   Considerar a introdução de um nó `CafeAudioPlayer2D` e `CafeAudioPlayer3D` que se conectariam ao `CafeAudioManager` para gerenciar sua própria reprodução posicional, recebendo o `AudioStream` do manager.

### 1.2. Controle de Fade para Música

Implementar transições suaves (fade-in/fade-out) entre as faixas de música ou ao parar a música. Isso melhora significativamente a experiência auditiva do jogador, evitando cortes abruptos.

*   **Implementação:**
    *   Adicionar parâmetros opcionais aos sinais `play_music_requested` (ex: `fade_duration: float = 1.0`) para controlar a duração do fade-in.
    *   Introduzir uma nova função `stop_music_with_fade(fade_duration: float = 1.0)` para parar a música com um fade-out suave.
    *   Utilizar `Tween`s ou timers para gerenciar as transições de volume.

### 1.3. Controle de Loop para SFX

Adicionar a opção de reproduzir um SFX em loop, o que é útil para sons de ambiente, efeitos contínuos (ex: motor de carro, chuva) ou música de fundo curta que não é gerenciada pelo sistema de playlist de música.

*   **Implementação:**
    *   Um novo sinal, como `play_looping_sfx_requested(sfx_key: String, bus: String, loop: bool = true)`.
    *   Uma forma de parar SFX específicos que estão em loop, como `stop_looping_sfx_requested(sfx_key: String)`.
    *   O pool de SFX precisaria ser capaz de rastrear quais players estão reproduzindo SFX em loop para que possam ser parados individualmente.

## 2. Sugestões de Documentação/Recursos Adicionais

### 2.1. Cena de Exemplo (Demo Scene)

Criar uma cena Godot simples (`cafe_audio_manager_demo.tscn`) dentro da pasta `addons/CafeAudioManager/scenes/` para demonstrar o uso básico e avançado do plugin de forma interativa.

*   **Conteúdo da Cena:**
    *   Botões para reproduzir diferentes SFX (com e sem loop, se implementado).
    *   Botões para iniciar/parar diferentes faixas de música ou playlists.
    *   Sliders para alterar o volume dos buses Master, Música e SFX.
    *   Exemplos de áudio posicional (se implementado), com um personagem se movendo e sons seguindo-o.
    *   Um script de exemplo mostrando como se conectar aos sinais emitidos pelo `CafeAudioManager` (ex: `music_track_changed`).

### 2.2. Guia de Migração Detalhado

Desenvolver um guia de migração mais abrangente para desenvolvedores que estão atualizando de um sistema de áudio existente para o `CafeAudioManager`.

*   **Conteúdo do Guia:**
    *   Exemplos de código "antes e depois" para cenários comuns (ex: substituir `AudioStreamPlayer.play()` por `CafeAudioManager.play_sfx_requested.emit()`).
    *   Dicas para mapear estruturas de áudio antigas para o `AudioManifest`.
    *   Considerações sobre a transição de sistemas de eventos globais para o EventBus do `CafeAudioManager`.

### 2.3. Melhoria na Geração do `AudioManifest`

Automatizar ou simplificar o processo de geração do `AudioManifest.tres` para melhorar o fluxo de trabalho do desenvolvedor.

*   **Implementação:**
    *   **Botão no Editor:** Adicionar um botão na interface do editor Godot (talvez no Inspector do nó `CafeAudioManager` ou em um dock personalizado) que execute o script `generate_audio_manifest.gd` com um único clique.
    *   **Hook de Exportação:** Explorar a possibilidade de executar o script de geração do manifest automaticamente como um passo pré-exportação, garantindo que o manifest esteja sempre atualizado nas builds finais.
    *   **Monitoramento de Arquivos:** (Mais avançado) Implementar um sistema que monitore os diretórios `sfx_root_path` e `music_root_path` e sugira a regeneração do manifest quando novos arquivos de áudio forem adicionados, removidos ou renomeados.